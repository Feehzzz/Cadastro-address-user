<div class='container'>

  <form method="GET" action="/new">
    <div class="form-row">
      <div class="col-md-3 mb-3">
        <label for="validationServer01">Nome</label>
        <input type="text" class="form-control" id="validationServer01" name="firstName" placeholder="Ex: Anderson" required>
      </div>

      <div class="col-md-3 mb-3">
        <label for="validationServer02">Sobrenome</label>
        <input type="text" class="form-control" id="validationServer02" name="lastName" placeholder="Ex: Silva sauro" required>
      </div>

      <div class="col-md-3 mb-3">
        <label for="validationServerUsername">Nickname</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupPrepend3">@</span>
          </div>
          <input type="text" class="form-control" id="validationServerUsername" name="nickName" placeholder="Nickname"
            aria-describedby="inputGroupPrepend3">
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="inputZip">CEP *</label>
      <input type="text" class="form-control col-md-2" name="zip" id="inputZip" maxlength="9" required onblur="getCEP(this.value)">
    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputAddress">Rua</label>
        <input type="text" class="form-control" name="address1" id="inputAddress1" placeholder="Rua dos bobos">
      </div>

      <div class="form-group col-md-3">
        <label for="inputNumber">NÃºmero</label>
        <input type="number" class="form-control" name="number" id="inputNumber" placeholder="Ex: 0">
      </div>
    </div>

    <div class="form-group">
      <label for="inputAddress2">Complemento</label>
      <input type="text" class="form-control col-md-9" name="address2" id="inputAddress2" placeholder="Apartamento, casa, fundos">
    </div>
    <div class="form-group">
      <label for="inputAddress3">Bairro</label>
      <input type="text" class="form-control col-md-9" name="address3" id="inputAddress3" placeholder="Bairro">
    </div>

    <div class="form-row">
      <div class="form-group col-md-5">
        <label for="inputCity">Cidade</label>
        <input type="text" class="form-control" name="city" id="inputCity">
      </div>
      <div class="form-group col-md-4">
        <label for="inputState">Estado/UF</label>
        <select id="inputState" class="form-control">
          <option>Escolha...</option>
          <option>...</option>
        </select>
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Cadastrar</button>
  </form>

  <div class='container'>
    <div class='row'>
      {{#each data}}
      <ul class="list-group list-group-horizontal">
        {{#each this}}
        <li class="list-group-item">{{this.name}}</li>
        <li class="list-group-item">{{this.address}}</li>
        {{/each}}
      </ul>
      {{/each}}
    </div>
  </div>

  <style>
    .container {
      margin-top: 10px
    }
  </style>

  <script>
  async function getCEP(cep){
    let opt = document.createElement('option')
 
    const res = await fetch(`https://viacep.com.br/ws/${cep}/json/`)
    const data = await res.json()
      document.getElementById('inputAddress1').value = data.logradouro 
      document.getElementById('inputAddress2').value = data.complemento
      document.getElementById('inputAddress3').value = data.bairro
      document.getElementById('inputCity').value = data.localidade
      opt.text = data.uf
      document.getElementById('inputState').appendChild(opt)
      
      
     

  }
  </script>
